<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="dsfd"><title>四则运算计算器实现 | 雨天</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">四则运算计算器实现</h1><a id="logo" href="/.">雨天</a><p class="description">行百里者半九十</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">四则运算计算器实现</h1><div class="post-meta">Oct 20, 2014<span> | </span><span class="category"><a href="/categories/algorithms/">algorithms</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>##波兰表示法与逆波兰表示法</p>
<p><em>波兰表示法</em>（Polish notation，或波兰记法），是一种逻辑、算术和代数表示方法，其特点是操作符置于操作数的前面，因此也称做前缀表示法。与逆波兰表示法不同，前缀表达式基本没有在商业计算器中使用过，但是其体系经常在编译器构造的概念教学中首先使用。</p>
<p><em>逆波兰表示法</em>（Reverse Polish notation，RPN，或逆波兰记法）中所有操作符置于操作数的后面，因此也被称为后缀表示法。逆波兰记法不需要括号来标识操作符的优先级。</p>
<p>逆波兰记法中，操作符置于操作数的后面。例如表达“三加四”时，写作“3 4 +”，而不是“3 + 4”。如果有多个操作符，操作符置于第二个操作数的后面，所以常规中缀记法的“3 - 4 + 5”在逆波兰记法中写作“3 4 - 5 +”：先3减去4，再加上5。使用逆波兰记法的一个好处是不需要使用括号。例如中缀记法中“3 - 4 <em> 5”与“（3 - 4）</em>5”不相同，但后缀记法中前者写做“3 4 5 <em> -”，无歧义地表示“3 (4 5 </em>) −”；后者写做“3 4 - 5 *”。</p>
<p>逆波兰表达式的解释器一般是基于堆栈的。解释过程一般是：操作数入栈；遇到操作符时，操作数出栈，求值，将结果入栈；当一遍后，栈顶就是表达式的值。因此逆波兰表达式的求值使用堆栈结构很容易实现，和能很快求值。</p>
<p><em>中缀表示法</em>（或中缀记法）是一个通用的算术或逻辑公式表示方法， 操作符是以中缀形式处于操作数的中间（例：3 + 4）。</p>
<p>##调度场算法</p>
<p>调度场算法（Shunting Yard Algorithm）是一个用于将中缀表达式转换为后缀表达式的经典算法，因其操作类似于火车编组场而得名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">当还有记号可以读取时：</div><div class="line">	读取一个记号。</div><div class="line">	如果这个记号表示一个数字，那么将其添加到输出队列中。</div><div class="line">	如果这个记号表示一个操作符，记做o1，那么：</div><div class="line">		只要存在另一个记为o2的操作符位于栈的顶端，并且</div><div class="line">			如果o1是左结合性的并且它的运算符优先级要小于或者等于o2的优先级，或者</div><div class="line">			如果o1是右结合性的并且它的运算符优先级比o2的要低，那么</div><div class="line">			将o2从栈的顶端弹出并且放入输出队列中(循环直至以上条件不满足为止)；</div><div class="line">		然后，将o1压入栈的顶端。</div><div class="line">	如果这个记号是一个左括号，那么就将其压入栈当中。</div><div class="line">	如果这个记号是一个右括号，那么：</div><div class="line">		从栈当中不断地弹出操作符并且放入输出队列中，直到栈顶部的元素为左括号为止。</div><div class="line">		将左括号从栈的顶端弹出，但并不放入输出队列中去。</div><div class="line">		如果在找到一个左括号之前栈就已经弹出了所有元素，那么就表示在表达式中存在不匹配的括号。</div><div class="line">当再没有记号可以读取时：</div><div class="line">	如果此时在栈当中还有操作符：</div><div class="line">		如果此时位于栈顶端的操作符是一个括号，那么就表示在表达式中存在不匹配的括号。</div><div class="line">	将操作符逐个弹出并放入输出队列中。</div><div class="line">退出算法。</div></pre></td></tr></table></figure></p>
<p><img src="/img/Shunting-Yard.png" alt=""></p>
<p>##逆波兰表示法的求值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">WHILE 有输入符号</div><div class="line">	读入下一个符号</div><div class="line">	IF 是一个操作数</div><div class="line">		入栈</div><div class="line">	ELSE IF 是一个操作符</div><div class="line">		有一个先验的表格给出该操作符需要n个参数</div><div class="line">		IF 堆栈中少于n个操作数</div><div class="line">			（错误） 用户没有输入足够的操作数</div><div class="line">		Else，n个操作数出栈</div><div class="line">		计算操作符。</div><div class="line">		将计算所得的值入栈</div><div class="line">IF 栈内只有一个值</div><div class="line">	这个值就是整个计算式的结果</div><div class="line">ELSE 多于一个值</div><div class="line">	（错误） 用户输入了多余的操作数</div></pre></td></tr></table></figure></p>
<p>对于一般的算术表达式，一个操作符只需要两个参数。</p>
<p><hr><br>下面给出四则运算器的代码实现<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="comment">//操作符的优先级</span></div><div class="line"><span class="comment">// 操作符 只考虑最简单的加减乘除</span></div><div class="line"><span class="comment">// 优先级		符号		运算顺序</span></div><div class="line"><span class="comment">// 1		* /     从左至右</span></div><div class="line"><span class="comment">// 2		+ -		从左至右</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">op_pri</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">    <span class="keyword">switch</span>(c) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="string">'*'</span>:</div><div class="line">            <span class="keyword">case</span> <span class="string">'/'</span>:</div><div class="line">                <span class="keyword">return</span> <span class="number">2</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">'-'</span>:</div><div class="line">            <span class="keyword">case</span> <span class="string">'+'</span>:</div><div class="line">                <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//判断字符是否为数字</span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_ident</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//判断字符是否为合法的操作符</span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">is_op</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> c == <span class="string">'/'</span> || c == <span class="string">'*'</span> || c == <span class="string">'^'</span> || c == <span class="string">'-'</span> || c == <span class="string">'+'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//调度场函数</span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">shunting_yard</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;input, <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;output)</span> </span>&#123;</div><div class="line">    <span class="comment">//清空输出队列</span></div><div class="line">    <span class="keyword">while</span>(!output.empty())</div><div class="line">        output.clear();</div><div class="line"></div><div class="line">    <span class="comment">//如果输入为空，直接返回</span></div><div class="line">    <span class="keyword">if</span> (input.empty())</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line"></div><div class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">char</span>&gt; op; <span class="comment">//操作符栈</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; input.size(); i++) &#123;</div><div class="line">        <span class="keyword">char</span> c = input[i];</div><div class="line">        <span class="keyword">if</span> (c == <span class="string">' '</span>)</div><div class="line">            <span class="keyword">continue</span>;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (is_ident(c)) &#123;</div><div class="line">            <span class="comment">//如果是数字，直接将字符加入到输出队列中</span></div><div class="line">            output.push_back(c);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (is_op(c)) &#123;</div><div class="line">            <span class="comment">//如果是操作符</span></div><div class="line">            <span class="comment">//如果操作符栈为空，直接将操作符压栈</span></div><div class="line">            <span class="keyword">if</span> (op.empty()) &#123;</div><div class="line">                op.push(c);</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">char</span> op_top = op.top(); <span class="comment">//栈顶操作符</span></div><div class="line">            <span class="keyword">if</span> (!is_op(op_top) || op_pri(c) &gt; op_pri(op_top)) &#123;</div><div class="line">                <span class="comment">//如果操作符的优先级要大于栈顶的操作符或者栈顶操作符为括号，直接压栈</span></div><div class="line">                op.push(c);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">//如果操作符的优先级要小于等于栈顶操作符，那么就一直将栈顶弹出</span></div><div class="line">                <span class="comment">//放入输出队列</span></div><div class="line">                <span class="keyword">while</span>(op_pri(c) &lt;= op_pri(op_top)) &#123;</div><div class="line">                    output.push_back(op_top);</div><div class="line">                    op.pop();</div><div class="line">                    <span class="keyword">if</span> (op.empty())</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    op_top = op.top();</div><div class="line">                &#125;</div><div class="line">                op.push(c);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">'('</span>) &#123;</div><div class="line">            <span class="comment">//如果是左括号，直接压栈</span></div><div class="line">            op.push(c);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c == <span class="string">')'</span>) &#123;</div><div class="line">            <span class="comment">//如果是右括号，弹出操作符，直到弹出左括号</span></div><div class="line">            <span class="keyword">while</span> (!op.empty()) &#123;</div><div class="line">                <span class="keyword">char</span> op_top = op.top();</div><div class="line">                <span class="keyword">if</span> (op_top != <span class="string">'('</span>) &#123;</div><div class="line">                    output.push_back(op_top);</div><div class="line">                    op.pop();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (!op.empty()) &#123;</div><div class="line">                <span class="comment">//如果找到了左括号，把左括号弹出</span></div><div class="line">                op.pop();</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">//如果栈弹空了还没找到，那么表达式错误</span></div><div class="line">                output.clear();</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"表达式错误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">//如果有其他字符，那么错误</span></div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"表达式错误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">            output.clear();</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (!op.empty()) &#123;</div><div class="line">        <span class="keyword">char</span> op_top = op.top();</div><div class="line">        <span class="keyword">if</span> (is_op(op_top)) &#123;</div><div class="line">            output.push_back(op_top);</div><div class="line">            op.pop();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"表达式错误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">            output.clear();</div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//计算你波兰表达式的值</span></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">calculate</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;output, <span class="keyword">double</span> &amp;result)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (output.empty())</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line"></div><div class="line">    <span class="built_in">stack</span>&lt;<span class="keyword">double</span>&gt; values;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; output.size(); i++) &#123;</div><div class="line">        <span class="keyword">char</span> c = output[i];</div><div class="line">        <span class="keyword">if</span> (is_ident(c)) &#123;</div><div class="line">            values.push(c - <span class="string">'0'</span>);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (is_op(c)) &#123;</div><div class="line">            <span class="keyword">if</span> (values.empty()) &#123;</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"表达式错误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">int</span> left = values.top();</div><div class="line">            values.pop();</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (values.empty()) &#123;</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="string">"表达式错误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">int</span> right = values.top();</div><div class="line">            values.pop();</div><div class="line"></div><div class="line">            <span class="keyword">switch</span>(c) &#123;</div><div class="line">                <span class="keyword">case</span> <span class="string">'+'</span>:</div><div class="line">                    values.push(right + left);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">'-'</span>:</div><div class="line">                    values.push(right - left);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">'*'</span>:</div><div class="line">                    values.push(right * left);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> <span class="string">'/'</span>:</div><div class="line">                    values.push(right / left);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"表达式错误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    result = values.top();</div><div class="line">    values.pop();</div><div class="line">    <span class="keyword">if</span> (!values.empty()) &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"表达式有误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; input;</div><div class="line">    input.push_back(<span class="string">'3'</span>);</div><div class="line">    input.push_back(<span class="string">'+'</span>);</div><div class="line">    input.push_back(<span class="string">'4'</span>);</div><div class="line">    input.push_back(<span class="string">'*'</span>);</div><div class="line">    input.push_back(<span class="string">'2'</span>);</div><div class="line">    input.push_back(<span class="string">'/'</span>);</div><div class="line">    input.push_back(<span class="string">'('</span>);</div><div class="line">    input.push_back(<span class="string">'1'</span>);</div><div class="line">    input.push_back(<span class="string">'-'</span>);</div><div class="line">    input.push_back(<span class="string">'5'</span>);</div><div class="line">    input.push_back(<span class="string">')'</span>);</div><div class="line"></div><div class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; output;</div><div class="line">    shunting_yard(input, output);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; output.size(); i++) &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;output[i];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">double</span> result;</div><div class="line">    <span class="keyword">if</span> (calculate(output, result)) &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;result&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"计算错误"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2014/10/20/2014-10-20-Polish-notation/" data-id="cj4e5059x001f6xacblq3ciut" class="article-share-link">分享</a><div class="tags"></div><div class="post-nav"><a href="/2014/10/23/2014-10-23-c-traps/" class="pre">c语言的一些需要注意的小问题</a><a href="/2014/10/16/2014-10-16-binary-search-tree/" class="next">二叉搜索树(binary search tree)</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NSQ/">NSQ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/algorithms/">algorithms</a><span class="category-list-count">32</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cpp/">cpp</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/lintcode/">lintcode</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/problems/">problems</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Hash-Table/" style="font-size: 15px;">Hash Table</a> <a href="/tags/动态规划/" style="font-size: 15px;">动态规划</a> <a href="/tags/图/" style="font-size: 15px;">图</a> <a href="/tags/二分搜索/" style="font-size: 15px;">二分搜索</a> <a href="/tags/Tree/" style="font-size: 15px;">Tree</a> <a href="/tags/Math/" style="font-size: 15px;">Math</a> <a href="/tags/Linked-List/" style="font-size: 15px;">Linked List</a> <a href="/tags/二叉树/" style="font-size: 15px;">二叉树</a> <a href="/tags/Stack/" style="font-size: 15px;">Stack</a> <a href="/tags/Array/" style="font-size: 15px;">Array</a> <a href="/tags/Bit-Manipulation/" style="font-size: 15px;">Bit Manipulation</a> <a href="/tags/Deque/" style="font-size: 15px;">Deque</a> <a href="/tags/Two-Pointers/" style="font-size: 15px;">Two Pointers</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/SkipList/" style="font-size: 15px;">SkipList</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/07/2017-10-07-docker-ethereum/">基于Docker的Ethereum 开发环境搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/2017-06-26-go-profile/">go 基准测试和pprof的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/26/2017-06-26-go-malloc/">go内存分配</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/19/2017-06-19-ratelimiter/">Ratelimter</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/03/2017-06-03-vm/">虚拟存储器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/06/2017-05-06-linux-awk/">awk</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/06/2017-05-06-mysql/">mysql的一些细节</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/01/2017-05-01-nsq/">NSQD源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/25/2016-03-25-skip-list/">SkipList(跳表)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/22/2016-03-22-stack-problems/">栈的一些巧妙应用</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://1mhz.me" title="1mhz" target="_blank">1mhz</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">雨天.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>