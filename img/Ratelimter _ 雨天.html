<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="dsfd"><title> | 雨天</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">雨天</h1><a id="logo" href="/.">雨天</a><p class="description">行百里者半九十</p></div><div id="nav-menu"><a href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"></h1><div class="post-content"><!DOCTYPE html>
<!-- saved from url=(0056)http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/ -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="dsfd"><title>Ratelimter | 雨天</title><link rel="stylesheet" type="text/css" href="./Ratelimter _ 雨天_files/style.css"><link rel="stylesheet" type="text/css" href="./Ratelimter _ 雨天_files/normalize.min.css"><link rel="stylesheet" type="text/css" href="./Ratelimter _ 雨天_files/pure-min.css"><link rel="stylesheet" type="text/css" href="./Ratelimter _ 雨天_files/grids-responsive-min.css"><link rel="stylesheet" href="./Ratelimter _ 雨天_files/font-awesome.min.css"><script type="text/javascript" src="./Ratelimter _ 雨天_files/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="http://localhost:4000/favicon.ico"><link rel="apple-touch-icon" href="http://localhost:4000/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="http://localhost:4000/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="http://localhost:4000/atom.xml"><style type="text/css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div id="MathJax_Message" style="display: none;"></div><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Ratelimter</h1><a id="logo" href="http://localhost:4000/" target="_blank" rel="external">雨天</a><p class="description">行百里者半九十</p></div><div id="nav-menu"><a href="http://localhost:4000/" class="current" target="_blank" rel="external"><i class="fa fa-home"> 首页</i></a><a href="http://localhost:4000/archives/" target="_blank" rel="external"><i class="fa fa-archive"> 归档</i></a><a href="http://localhost:4000/about/" target="_blank" rel="external"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Ratelimter</h1><div class="post-meta">Jun 3, 2017<span> | </span><span class="category"><a href="http://localhost:4000/categories/%E5%85%B6%E4%BB%96/" target="_blank" rel="external">其他</a></span><script src="./Ratelimter _ 雨天_files/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv" style="display: inline;"> | <span id="busuanzi_value_page_pv">5</span><span> 阅读</span></span></div><div class="post-content"><p>最初是因为要配置nginx的限速所以想研究一下限速的方法，nginx里用到了<code>Leaky Bucket</code>算法，下面记一下漏桶（Leaky Bucket）和令牌桶(Token Bucket)算法的区别。</p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><h2 id="漏桶算法"><a href="http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/#漏桶算法" class="headerlink" title="漏桶算法" target="_blank" rel="external"></a>漏桶算法</h2><p>漏桶算法思路很简单，水（请求）先进入到漏桶里，漏桶以一定的速度出水，当水流入速度过大会直接溢出，可以看出漏桶算法能强行限制数据的传输速率。</p>
<p><a href="./Ratelimter _ 雨天_files/leaky-bucket.png" title="" class="fancybox" rel="gallery"><img src="./Ratelimter _ 雨天_files/leaky-bucket.png" alt=""></a></p>
<p>这里有一个简单的golang的漏桶算法的实现：<a href="http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/%E6%BC%8F%E6%A1%B6%E7%AE%97%E6%B3%95" target="_blank" rel="external">https://github.com/uber-go/ratelimit</a></p>
<p>漏桶算法的实现很简单，就是设置一个速率，然后记录一个上一次请求的时间，当一个请求来的时候，判断距离上一个请求的时间是否超过了1/rate，如果没有超过，那么就等够时间，然后再执行。</p>
<p>这样能够强行控制请求的速率，但是也有两个问题，就是太依赖与上一次请求的时间，当上一次执行的时间是很久以前时，那么如果立即执行请求，有两种情况需要考虑：</p>
<ol>
<li>假如系统空转很久了，然后强制以一定的速率来处理是否合适，是否可以提高速度</li>
<li>假如系统太忙了，比如系统刚启动，是不是应该把速度降下来</li>
</ol>
<p>就是可能会导致对系统利用不足或者过载。</p>
<h2 id="令牌桶算法"><a href="http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/#令牌桶算法" class="headerlink" title="令牌桶算法" target="_blank" rel="external"></a>令牌桶算法</h2><p>令牌桶算法通过发放令牌，根据令牌的rate频率做请求频率限制，容量限制等。</p>
<p>令牌桶算法的原理是系统会以一个恒定的速度往桶里放入令牌，而如果请求需要被处理，则需要先从桶里获取一个令牌，当桶里没有令牌可取时，则拒绝服务。</p>
<p><a href="./Ratelimter _ 雨天_files/token-bucket.jpg" title="" class="fancybox" rel="gallery"><img src="./Ratelimter _ 雨天_files/token-bucket.jpg" alt=""></a></p>
<p>令牌桶算法的基本过程如下:</p>
<ol>
<li>每秒会有 r 个令牌放入桶中，或者说，每过 1/r 秒桶中增加一个令牌；</li>
<li>桶中最多存放 b 个令牌，如果桶满了，新放入的令牌会被丢弃；</li>
<li>当一个 n 字节的数据包到达时，消耗 n 个令牌，然后发送该数据包；</li>
<li>如果桶中可用令牌小于 n，则该数据包将被缓存或丢弃。</li>
</ol>
<p>令牌桶算法相对于漏桶算法，由于存有令牌，所以可以应对一定量的突发状况。</p>
<h2 id="Guava-Ratelimter的实现"><a href="http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/#Guava-Ratelimter的实现" class="headerlink" title="Guava Ratelimter的实现" target="_blank" rel="external"></a>Guava Ratelimter的实现</h2><p><a href="http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/RateLimiter" target="_blank" rel="external">https://github.com/google/guava/blob/v18.0/guava/src/com/google/common/util/concurrent/SmoothRateLimiter.java#L124:L130</a></p>
<p>RateLimter对于上面说的简单的漏桶算法加了一些优化。可以一定程度上解决对系统的利用不足和过载的问题。</p>
<p>RateLimter存了一个<code>storedPermits</code>,当请求过来的时候，可以从<code>storedPermits</code>里取。也就是说第一次请求会立即响应，下一次请求就得等了。有点今朝有酒今朝醉，明日愁来明日愁的感觉。</p>
<p>那么下一次请求要等多久呢，RateLimter考虑到了WarmUp的问题，当系统存了<code>maxPermits</code>，也就是系统很久没被使用了，就需要一个热身的时间，在开始的一些请求(<code>1/2 * maxPermits</code>)里，速率会比正常速率慢，当请求量超过了<code>1/2 * maxPermits</code>, 系统的速率就稳定下来。</p>
<p><a href="./Ratelimter _ 雨天_files/rate_limiter.png" title="" class="fancybox" rel="gallery"><img src="./Ratelimter _ 雨天_files/rate_limiter.png" alt=""></a></p>
</div><script type="text/javascript" src="./Ratelimter _ 雨天_files/share.js" async></script><a data-url="http://yoursite.com/2017/06/03/2017-06-19-ratelimiter/" data-id="cj446w8fz0000kmack5itryvd" class="article-share-link">分享</a><div class="tags"></div><div class="post-nav"><a href="http://localhost:4000/2017/06/03/2017-06-03-vm/" class="next" target="_blank" rel="external">虚拟存储器</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="http://www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/JAVA/" target="_blank" rel="external">JAVA</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/LeetCode/" target="_blank" rel="external">LeetCode</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/NSQ/" target="_blank" rel="external">NSQ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/algorithms/" target="_blank" rel="external">algorithms</a><span class="category-list-count">32</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/cpp/" target="_blank" rel="external">cpp</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/database/" target="_blank" rel="external">database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/docker/" target="_blank" rel="external">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/golang/" target="_blank" rel="external">golang</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/lintcode/" target="_blank" rel="external">lintcode</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/linux/" target="_blank" rel="external">linux</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/mysql/" target="_blank" rel="external">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/problems/" target="_blank" rel="external">problems</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/%E5%85%B6%E4%BB%96/" target="_blank" rel="external">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="http://localhost:4000/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" target="_blank" rel="external">操作系统</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="http://localhost:4000/tags/Stack/" style="font-size: 15px;" target="_blank" rel="external">Stack</a> <a href="http://localhost:4000/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 15px;" target="_blank" rel="external">动态规划</a> <a href="http://localhost:4000/tags/%E5%9B%BE/" style="font-size: 15px;" target="_blank" rel="external">图</a> <a href="http://localhost:4000/tags/%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2/" style="font-size: 15px;" target="_blank" rel="external">二分搜索</a> <a href="http://localhost:4000/tags/Math/" style="font-size: 15px;" target="_blank" rel="external">Math</a> <a href="http://localhost:4000/tags/Tree/" style="font-size: 15px;" target="_blank" rel="external">Tree</a> <a href="http://localhost:4000/tags/Linked-List/" style="font-size: 15px;" target="_blank" rel="external">Linked List</a> <a href="http://localhost:4000/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 15px;" target="_blank" rel="external">二叉树</a> <a href="http://localhost:4000/tags/Hash-Table/" style="font-size: 15px;" target="_blank" rel="external">Hash Table</a> <a href="http://localhost:4000/tags/Array/" style="font-size: 15px;" target="_blank" rel="external">Array</a> <a href="http://localhost:4000/tags/Bit-Manipulation/" style="font-size: 15px;" target="_blank" rel="external">Bit Manipulation</a> <a href="http://localhost:4000/tags/Deque/" style="font-size: 15px;" target="_blank" rel="external">Deque</a> <a href="http://localhost:4000/tags/Two-Pointers/" style="font-size: 15px;" target="_blank" rel="external">Two Pointers</a> <a href="http://localhost:4000/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;" target="_blank" rel="external">设计模式</a> <a href="http://localhost:4000/tags/SkipList/" style="font-size: 15px;" target="_blank" rel="external">SkipList</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/" target="_blank" rel="external">Ratelimter</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2017/06/03/2017-06-03-vm/" target="_blank" rel="external">虚拟存储器</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2017/05/06/2017-05-06-linux-awk/" target="_blank" rel="external">awk</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2017/05/06/2017-05-06-mysql/" target="_blank" rel="external">mysql的一些细节</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2017/05/01/2017-05-01-nsq/" target="_blank" rel="external">NSQD源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2016/03/25/2016-03-25-skip-list/" target="_blank" rel="external">SkipList(跳表)</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2016/03/22/2016-03-22-stack-problems/" target="_blank" rel="external">栈的一些巧妙应用</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2016/03/21/2016-03-21-database-engine/" target="_blank" rel="external">数据库索引的实现方式</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2016/03/14/2016-03-14-java-interface/" target="_blank" rel="external">抽象类与接口</a></li><li class="post-list-item"><a class="post-list-link" href="http://localhost:4000/2016/03/14/2016-03-14-java-inner-class/" target="_blank" rel="external">内部类</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://1mhz.me/" title="1mhz" target="_blank">1mhz</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="http://localhost:4000/" rel="external" target="_blank">雨天.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io/"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="http://localhost:4000/2017/06/03/2017-06-19-ratelimiter/#top" class="show" target="_blank" rel="external"></a><script type="text/javascript" src="./Ratelimter _ 雨天_files/totop.js" async></script><script type="text/javascript" src="./Ratelimter _ 雨天_files/jquery.fancybox.min.js" async></script><script type="text/javascript" src="./Ratelimter _ 雨天_files/fancybox.js" async></script><link rel="stylesheet" type="text/css" href="./Ratelimter _ 雨天_files/jquery.fancybox.min.css"><script type="text/x-mathjax-config;executed=true">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script src="./Ratelimter _ 雨天_files/MathJax.js" id=""></script><script type="text/javascript" src="./Ratelimter _ 雨天_files/codeblock-resizer.js"></script><script type="text/javascript" src="./Ratelimter _ 雨天_files/smartresize.js"></script></div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body></html></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NSQ/">NSQ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/algorithms/">algorithms</a><span class="category-list-count">32</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/cpp/">cpp</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/go/">go</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/lintcode/">lintcode</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/problems/">problems</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/其他/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Hash-Table/" style="font-size: 15px;">Hash Table</a> <a href="/tags/动态规划/" style="font-size: 15px;">动态规划</a> <a href="/tags/图/" style="font-size: 15px;">图</a> <a href="/tags/二分搜索/" style="font-size: 15px;">二分搜索</a> <a href="/tags/Tree/" style="font-size: 15px;">Tree</a> <a href="/tags/Math/" style="font-size: 15px;">Math</a> <a href="/tags/Linked-List/" style="font-size: 15px;">Linked List</a> <a href="/tags/二叉树/" style="font-size: 15px;">二叉树</a> <a href="/tags/Stack/" style="font-size: 15px;">Stack</a> <a href="/tags/Array/" style="font-size: 15px;">Array</a> <a href="/tags/Bit-Manipulation/" style="font-size: 15px;">Bit Manipulation</a> <a href="/tags/Deque/" style="font-size: 15px;">Deque</a> <a href="/tags/Two-Pointers/" style="font-size: 15px;">Two Pointers</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/SkipList/" style="font-size: 15px;">SkipList</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/10/07/2017-10-07-docker-ethereum/">基于Docker的Ethereum 开发环境搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/2017-06-26-go-profile/">go 基准测试和pprof的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/26/2017-06-26-go-malloc/">go内存分配</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/19/2017-06-19-ratelimiter/">Ratelimter</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/03/2017-06-03-vm/">虚拟存储器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/06/2017-05-06-linux-awk/">awk</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/06/2017-05-06-mysql/">mysql的一些细节</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/01/2017-05-01-nsq/">NSQD源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/25/2016-03-25-skip-list/">SkipList(跳表)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/22/2016-03-22-stack-problems/">栈的一些巧妙应用</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://1mhz.me" title="1mhz" target="_blank">1mhz</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">雨天.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>